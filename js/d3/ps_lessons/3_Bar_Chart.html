<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
</head>

<body>
    <script>
        var w = 300;
        var h = 100;

        var padding = 2;
        var dataset = [5, 10, 15, 20, 25];

        var svg = d3.select("body").append("svg")
            .attr("width", w)
            .attr("height", h);

        svg.selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr("x", function (d, i) {
                return i * (w / dataset.length)
            })
            .attr("y", function (d, i) {
                return h - d * 4;
            })
            .attr("width", w / dataset.length - padding)
            .attr("height", function (d, i) {
                return d * 4;
            })
            .attr("fill", function (d, i) {
                return "rgb(" + d * 10 + ",0 , 0)"
            })

        d3.select("body").append("svg")
            .attr("width", w)
            .attr("height", h)
            .selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr({
                x: (d, i) => i * (w / dataset.length),
                y: (d, i) => h - d * 4,
                width: (d, i) => w / dataset.length - padding,
                height: (d, i) => d * 4,
                fill: (d, i) => "rgb(0," + d * 10 + ",0 )"
            })

        function colorPicker(v) {
            if (v <= 20) return "#666666"
            else if (v > 20) return "#FF0033"
        }

        d3.select("body").append("svg")
            .attr("width", w)
            .attr("height", h)
            .selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr({
                x: (d, i) => i * (w / dataset.length),
                y: (d, i) => h - d * 4,
                width: (d, i) => w / dataset.length - padding,
                height: (d, i) => d * 4,
                fill: (d, i) => colorPicker(d)
            })


        var svg_1 = d3.select("body").append("svg")
            .attr("width", w)
            .attr("height", h)

        svg_1.selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr({
                x: (d, i) => i * (w / dataset.length),
                y: (d, i) => h - d * 4,
                width: (d, i) => w / dataset.length - padding,
                height: (d, i) => d * 4,
                fill: (d, i) => colorPicker(d)
            })


        svg_1.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(d => d)
            .attr({
                "text-anchor": "middle",
                x: (d, i) => i * (w / dataset.length) + (w / dataset.length - padding)/2,
                y: (d) => h - d * 4 + 14,
                "font-family" : "sans-serif",
                "font-size" : 12,
                "fill" : "#ffffff"
            })


    </script>
</body>

</html>